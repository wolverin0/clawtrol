<%
  column_labels = {
    "inbox" => "Inbox",
    "up_next" => "Up Next",
    "in_progress" => "In Progress",
    "in_review" => "In Review",
    "done" => "Done"
  }
  column_colors = {
    "inbox" => "bg-content-muted",
    "up_next" => "bg-status-info",
    "in_progress" => "bg-status-warning",
    "in_review" => "bg-purple-500",
    "done" => "bg-status-success"
  }
%>

<div class="flex-1 min-w-0 flex flex-col bg-bg-surface rounded-lg border border-border">
  <%# Column Header %>
  <div class="flex items-center gap-2 px-3 py-3">
    <div class="w-2 h-2 rounded-full <%= column_colors[status] %>"></div>
    <h2 class="text-sm font-semibold text-content font-display"><%= column_labels[status] %></h2>
    <span id="column-<%= status %>-count" class="ml-auto text-xs text-content-secondary bg-bg-elevated px-1.5 py-0.5 rounded"><%= tasks.count %></span>
  </div>

  <%# Tasks List %>
  <ul id="column-<%= status %>"
      class="flex-1 overflow-y-auto px-2 py-2 space-y-2 min-h-[200px]"
      data-controller="sortable"
      data-sortable-group-value="board"
      data-sortable-status-value="<%= status %>"
      data-sortable-url-value="<%= update_task_status_board_path %>">
    <% tasks.each do |task| %>
      <%= render "board/task_card", task: task %>
    <% end %>
  </ul>

  <% if status == "inbox" %>
    <%# Add Card link for Inbox column %>
    <div class="px-2 pb-2">
      <button type="button"
              data-action="click->board#openNewTaskModal"
              class="w-full flex items-center justify-center gap-1 py-2 text-xs text-content-muted hover:text-content hover:bg-bg-hover rounded-md transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
        Add task
      </button>
    </div>
  <% end %>
</div>
