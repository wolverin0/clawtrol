<% content_for :title, "Today - clawdeck" %>
<% content_for :breadcrumb_standalone, "Today" %>
<% @inbox_page = true %>
<section id="tasks" class="pt-4 space-y-6 max-w-2xl mx-auto" data-controller="completed-tasks" data-completed-tasks-list-id-value="today">

  <!-- Add Task Input -->
  <%= render "shared/add_task_input", url: today_tasks_path %>

  <!-- Tasks List -->
  <ul id="tasks-list" class="space-y-2">
    <% @tasks.each do |task| %>
      <%= render "today/tasks/task", task: task %>
    <% end %>
  </ul>

  <!-- Completed Tasks Section -->
  <% if @completed_tasks.any? %>
    <div id="completed-section-today">
      <button type="button"
              data-action="click->completed-tasks#toggle"
              class="px-4 py-2 cursor-pointer text-xs font-medium rounded-md transition-colors bg-stone-100 hover:bg-stone-200 dark:bg-white/10 dark:hover:bg-white/20 text-stone-400 dark:text-white/70">
        <span data-completed-tasks-target="count"><%= @completed_tasks.count %></span> completed
      </button>
      <div data-completed-tasks-target="wrapper" class="grid transition-[grid-template-rows] duration-600 ease-in-out" style="grid-template-rows: 1fr;">
        <ul class="pt-6 space-y-2 min-h-0 overflow-hidden" id="completed-tasks-today" data-completed-tasks-target="content">
          <% @completed_tasks.each do |task| %>
            <%= render "today/tasks/task", task: task %>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>
</section>
