<%# Board Modals â€” New Board + Board Settings %>
<%# Connected to board-modal Stimulus controller in _header.html.erb parent %>

<%# New Board Modal %>
<div data-board-modal-target="modal"
     class="hidden fixed inset-0 z-[80] flex items-center justify-center"
     data-action="click->board-modal#closeOnBackdrop keydown.escape->board-modal#close"
     role="dialog"
     aria-modal="true"
     aria-labelledby="new-board-title">
  <%# Backdrop %>
  <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" data-action="click->board-modal#close"></div>

  <%# Modal Content %>
  <div class="relative bg-bg-base rounded-xl shadow-2xl border border-border w-full max-w-md mx-4 overflow-hidden">
    <%# Header %>
    <div class="flex items-center justify-between px-5 py-4 border-b border-border">
      <h2 id="new-board-title" class="text-lg font-semibold text-text-base">ðŸ“‹ New Board</h2>
      <button data-action="click->board-modal#close"
              class="text-text-muted hover:text-text-base transition-colors p-1 rounded-lg hover:bg-bg-hover"
              aria-label="Close">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <%# Form %>
    <%= form_with url: boards_path, method: :post, class: "px-5 py-4 space-y-4" do |form| %>
      <div>
        <%= form.label :name, "Board Name", class: "block text-sm font-medium text-text-base mb-1" %>
        <%= form.text_field :name,
              class: "w-full px-3 py-2 bg-bg-input border border-border rounded-lg text-text-base placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent",
              placeholder: "e.g. Sprint 42, Marketing, Backlog",
              required: true,
              autofocus: true,
              maxlength: 100 %>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <%= form.label :icon, "Icon", class: "block text-sm font-medium text-text-base mb-1" %>
          <%= form.text_field :icon,
                class: "w-full px-3 py-2 bg-bg-input border border-border rounded-lg text-text-base placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent",
                placeholder: "ðŸ“‹",
                maxlength: 10 %>
        </div>
        <div>
          <%= form.label :color, "Color", class: "block text-sm font-medium text-text-base mb-1" %>
          <%= form.select :color,
                options_for_select([
                  ["Gray", "gray"], ["Blue", "blue"], ["Green", "green"],
                  ["Yellow", "yellow"], ["Red", "red"], ["Purple", "purple"],
                  ["Pink", "pink"], ["Orange", "orange"]
                ], "gray"),
                {},
                class: "w-full px-3 py-2 bg-bg-input border border-border rounded-lg text-text-base focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent" %>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <%= form.check_box :auto_claim_enabled,
              class: "rounded border-border text-accent-primary focus:ring-accent-primary" %>
        <%= form.label :auto_claim_enabled, "Auto-claim tasks matching prefix", class: "text-sm text-text-muted" %>
      </div>

      <div class="flex justify-end gap-3 pt-2">
        <button type="button"
                data-action="click->board-modal#close"
                class="px-4 py-2 text-sm text-text-muted hover:text-text-base transition-colors">
          Cancel
        </button>
        <%= form.submit "Create Board",
              class: "px-4 py-2 text-sm font-medium text-white bg-accent-primary hover:bg-accent-primary/90 rounded-lg transition-colors cursor-pointer" %>
      </div>
    <% end %>
  </div>
</div>
